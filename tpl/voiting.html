<h1>Голосование по потребительским предпочтениям</h1>
{literal}
<style>
.voiting a:link {
    color: black;
}
.voiting a:visited {
    color: black;
}
.row1,.row2,.row3 {
	cursor: pointer;
	font-size:18px;
	line-height:50px;
	margin:auto;
	width:300px;
	height:50px;
	/*padding:10px 10px 10px 10px;*/
	/*background-color:red;*/
	/*float:auto;*/
	display: inline-block;
	border-radius:10px;
	/*text-shadow: 2px 2px 4px #000000;*/
	box-shadow: 2px 2px 10px #000000;
}
.prez_quad {
	/*cursor: pointer;*/
	line-height:100px;
	margin:auto;
	width:100px;
	height:100px;
	border-radius:5px;
	/*text-shadow: 2px 2px 4px #000000;*/
	box-shadow: 2px 2px 4px #000000;
}
.ball1,.ball2,.ball3 {
	cursor: pointer;
	font-size:18px;
	line-height:30px;
	/*margin:auto;*/
	width:30px;
	height:30px;
	/*padding:10px 10px 10px 10px;*/
	/*background-color:red;*/
	/*float:auto;*/
	display: inline-block;
	border-radius:10px;
	/*text-shadow: 2px 2px 4px #000000;*/
	box-shadow: 2px 2px 4px #000000;
}
</style>
<script>
function setProdVote(row,column,obj)
{
	var selected = $(obj).hasClass('selected');
	$('.row'+row).removeClass('selected');
	$('.row'+row).css('background-color','transparent');
	$('.column'+column).removeClass('selected');
	$('.column'+column).css('background-color','transparent');
	if (!selected)
	{
		$(obj).addClass('selected');
		$(obj).css('background-color','red');
	}
	console.log(row+column+obj);
	var fd = new FormData();
	fd.append('row', row);
	fd.append('column', column);
	fd.append('selected', selected);
	$.ajax({
		type: 'POST',
		url: '?action=voiting&nohead=1&saveProd=1',
		data: fd,
		processData: false,
		contentType: false,
		success: function(data) {
			$('#result').html(data);
			console.log('saved');
		}
	});	
}
function setBall(column,obj,val)
{
	var selected = $(obj).hasClass('selected');
	$('.ball'+column).removeClass('selected');
	$('.ball'+column).css('background-color','transparent');
	if (!selected)
	{
		$(obj).addClass('selected');
		$(obj).css('background-color','red');
	}
	console.log(column+obj+val);
	var fd = new FormData();
	fd.append('column', column);
	fd.append('selected', selected);
	fd.append('val', val);
	$.ajax({
		type: 'POST',
		url: '?action=voiting&nohead=1&saveBall=1',
		data: fd,
		processData: false,
		contentType: false,
		success: function(data) {
			$('#result').html(data);
			console.log('saved');
		}
	});	
}




</script>
{/literal}
<table class="voiting" border=0 cellpadding=20 cellspacing=20 style="text-align:center;vertical-align:middle;/*width:100%;*/">
<tbody>
	<tr>
		<td><div onClick="setProdVote(1,1,this);" class="column1 row1 cell11">BARISTI Венская Обжарка</div></td>
		<td><div onClick="setProdVote(1,2,this);" class="column2 row1 cell21">BARISTI Венская Обжарка</div></td>
		<td><div onClick="setProdVote(1,3,this);" class="column3 row1 cell31">BARISTI Венская Обжарка</div></td>
	</tr>                                                             
	<tr>                                                              
		<td><div onClick="setProdVote(2,1,this);" class="column1 row2 cell12">BARISTI Итальянская Обжарка</div></td>
		<td><div onClick="setProdVote(2,2,this);" class="column2 row2 cell22">BARISTI Итальянская Обжарка</div></td>
		<td><div onClick="setProdVote(2,3,this);" class="column3 row2 cell32">BARISTI Итальянская Обжарка</div></td>
	</tr>                                                             
	<tr>                                                              
		<td><div onClick="setProdVote(3,1,this);" class="column1 row3 cell13">Jacobs Monarch</div></td>
		<td><div onClick="setProdVote(3,2,this);" class="column2 row3 cell23">Jacobs Monarch</div></td>
		<td><div onClick="setProdVote(3,3,this);" class="column3 row3 cell33">Jacobs Monarch</div></td>
	</tr>
	<tr>
		<td><div class="prez_quad" style="background-color:#0000FF"></div></td>
		<td><div class="prez_quad" style="background-color:#008000"></div></td>
		<td><div class="prez_quad" style="background-color:#ffff00"></div></td>
	</tr>
	<tr style="text-align:center">
		<td>
			<div onClick="setBall(1,this,1);" class="ball1 cellb11">1</div>
			<div onClick="setBall(1,this,2);" class="ball1 cellb12">2</div>
			<div onClick="setBall(1,this,3);" class="ball1 cellb13">3</div>
			<div onClick="setBall(1,this,4);" class="ball1 cellb14">4</div>
			<div onClick="setBall(1,this,5);" class="ball1 cellb15">5</div>
			<div onClick="setBall(1,this,6);" class="ball1 cellb16">6</div>
			<div onClick="setBall(1,this,7);" class="ball1 cellb17">7</div>
		</td>
		<td>
			<div onClick="setBall(2,this,1);" class="ball2 cellb21">1</div>
			<div onClick="setBall(2,this,2);" class="ball2 cellb22">2</div>
			<div onClick="setBall(2,this,3);" class="ball2 cellb23">3</div>
			<div onClick="setBall(2,this,4);" class="ball2 cellb24">4</div>
			<div onClick="setBall(2,this,5);" class="ball2 cellb25">5</div>
			<div onClick="setBall(2,this,6);" class="ball2 cellb26">6</div>
			<div onClick="setBall(2,this,7);" class="ball2 cellb27">7</div>
		</td>
		<td>
			<div onClick="setBall(3,this,1);" class="ball3 cellb31">1</div>
			<div onClick="setBall(3,this,2);" class="ball3 cellb32">2</div>
			<div onClick="setBall(3,this,3);" class="ball3 cellb33">3</div>
			<div onClick="setBall(3,this,4);" class="ball3 cellb34">4</div>
			<div onClick="setBall(3,this,5);" class="ball3 cellb35">5</div>
			<div onClick="setBall(3,this,6);" class="ball3 cellb36">6</div>
			<div onClick="setBall(3,this,7);" class="ball3 cellb37">7</div>
		</td>
	</tr>
</tbody>
</table>
<p id="result"></p>
<script>
	$('.cell{$voiting.product1}1').addClass('selected');
	$('.cell{$voiting.product1}1').css('background-color','red');
	$('.cell{$voiting.product2}2').addClass('selected');
	$('.cell{$voiting.product2}2').css('background-color','red');
	$('.cell{$voiting.product3}3').addClass('selected');
	$('.cell{$voiting.product3}3').css('background-color','red');
	$('.cellb1{$voiting.ball1}').addClass('selected');
	$('.cellb1{$voiting.ball1}').css('background-color','red');
	$('.cellb2{$voiting.ball2}').addClass('selected');
	$('.cellb2{$voiting.ball2}').css('background-color','red');
	$('.cellb3{$voiting.ball3}').addClass('selected');
	$('.cellb3{$voiting.ball3}').css('background-color','red');
</script>
