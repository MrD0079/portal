<table border="1" cellspacing="0" cellpadding=3 width=1000px>
	<tr style="font-weight:bold;text-align:center">
		<td style="vertical-align: top; text-align: center;">№ п/п<br></td>
		<td style="vertical-align: top; text-align: center;">Дата накладной<br></td>
		<td style="vertical-align: top; text-align: center;">Номер накладной<br></td>
		<td style="vertical-align: top; text-align: center;">Сумма по накладной, {$valuta}</td>
		<td style="vertical-align: top; text-align: center;">Сумма продаж фасованных конфет в накладной, {$valuta}<br></td>
		<td style="vertical-align: top; text-align: center;">Количество SKU фасованных конфет в накладной<br></td>
		<td style="vertical-align: top; text-align: center;">Акционная накладная<br></td>
		<td style="vertical-align: top; text-align: center;">Количество<br>бонусных коробок<br>конфет<br>"На десерт<br>со сливочным<br>вкусом 0.100"<br>или "Шатенка вишня"</td>
		<td style="vertical-align: top; text-align: center;">Количество<br>бонусных коробок<br>конфет<br>"Труфалье<br>Делюкс 0.200"<br>или наборов<br>2*"Шатенка вишня"</td>
	</tr>
	{foreach key=nakl_list_key item=nakl_list_item from=$nakl_list name=nakl_list}
	<tr {if $nakl_list_item.action_nakl eq 1}bgcolor="#00ff00"{/if} bgcolor="{cycle values="#ccffff,#ffffcc"}">
		<td>{$smarty.foreach.nakl_list.iteration}</td>
		<td>{$nakl_list_item.data}</td>
		<td>{$nakl_list_item.nakl}</td>
		<td style="text-align:right">{$nakl_list_item.summa|default:0|num:2}</td>
		<td style="text-align:right">{$nakl_list_item.summnds_pg|default:0|num:2}</td>
		<td style="text-align:right">{$nakl_list_item.qtysku|default:0}</td>
		<td style="text-align:center">
			<input
				{if not $nakl_list_item.ok_traid neq 1 or $nakl_list_item.ok_chief eq 1}disabled{/if} {if $nakl_list_item.action_nakl neq 1} disabled {/if}
				onclick="
				$('#bonus_d_qty{$nakl_list_item.h_tp_kod_data_nakl}').attr('disabled',!this.checked);
				$('#bonus_t_qty{$nakl_list_item.h_tp_kod_data_nakl}').attr('disabled',!this.checked);
				$('#selected{$nakl_list_item.h_tp_kod_data_nakl}').val(this.checked?1:0);

				"
				type=checkbox
				{if $nakl_list_item.selected eq 1}checked{/if}
			>
			<input
				type=hidden
				id=selected{$nakl_list_item.h_tp_kod_data_nakl}
				name=keys[{$nakl_list_item.h_tp_kod_data_nakl}]
				{if $nakl_list_item.action_nakl neq 1} disabled {/if}
			>
			<script>$('#selected{$nakl_list_item.h_tp_kod_data_nakl}').val({$nakl_list_item.selected});</script>
		</td>
		<td style="text-align:center">
			<input required
				{if $nakl_list_item.selected neq 1}disabled{/if}
				class="number_int"
				size=10
				name=data[{$nakl_list_item.h_tp_kod_data_nakl}][bonus_d_qty] id=bonus_d_qty{$nakl_list_item.h_tp_kod_data_nakl} value="{$nakl_list_item.bonus_d_qty}"
				onchange="z({$nakl_list_item.h_tp_kod_data_nakl},{$nakl_list_item.summnds_pg});"
			>
		</td>
		<td style="text-align:center">
			<input required
				{if $nakl_list_item.selected neq 1}disabled{/if}
				class="number_int"
				size=10
				name=data[{$nakl_list_item.h_tp_kod_data_nakl}][bonus_t_qty] id=bonus_t_qty{$nakl_list_item.h_tp_kod_data_nakl} value="{$nakl_list_item.bonus_t_qty}"
				onchange="z({$nakl_list_item.h_tp_kod_data_nakl},{$nakl_list_item.summnds_pg});"
			>
		</td>
		{if $nakl_list_item.action_nakl eq 1}
		<input type=hidden class=checker id=checker_{$nakl_list_item.h_tp_kod_data_nakl} value=0>
		{/if}
	</tr>
	{/foreach}
</table>

{literal}
<script>
function z(id,v)
{
	x = $('#bonus_d_qty'+id).val() * 100 + $('#bonus_t_qty'+id).val() * 200;
	if (x>v)
	{
		alert('Накладная не может быть добавлена, так как превышена затратная часть!');
		$('#checker_'+id).attr('disabled',true);
	}
	else
	{
		$('#checker_'+id).attr('disabled',false);
	}
	$('.checker:disabled').length!=0 ? $('#add').attr('disabled',true) : $('#add').attr('disabled',false);

}
</script>
{/literal}


<p>
<input type=submit name=add id=add value="Добавить накладные в акцию">
</p>

