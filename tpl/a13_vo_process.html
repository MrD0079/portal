<h1>Ход акции "Волшебная осень с АВК" - {if $smarty.request.month neq 13}{$m_cur}{else}накопительная{/if}</h1>

{if not $smarty.request.print}

<form target="_self" method="POST" name=form_report id=form_report enctype="multipart/form-data">


{if $is_ts neq 1}



По руководителю:
<br>
<select name=exp_list_without_ts id=exp_list_without_ts onchange="javascript:fn_submit('exp_list_without_ts');">
<option value=0></option>
{foreach key=key item=item from=$exp_list_without_ts}
<option value={$item.emp_svid}><b>{$item.emp_name}</b> ({$item.emp_pos}) {if $item.datauvol}уволен {$item.datauvol}{/if}</option>
{/foreach}
</select>


<br>

По супервайзеру:
<br>
<select name=exp_list_only_ts id=exp_list_only_ts onchange="javascript:fn_submit('exp_list_only_ts');">
<option value=0></option>
{foreach key=key item=item from=$exp_list_only_ts}
<option value={$item.emp_svid}><b>{$item.emp_name}</b> ({$item.emp_pos}) {if $item.datauvol}уволен {$item.datauvol}{/if}</option>
{/foreach}
</select>

<br>

<script>$("#exp_list_without_ts option[value={$smarty.request.exp_list_without_ts}]").prop('selected', true);</script>
<script>$("#exp_list_only_ts option[value={$smarty.request.exp_list_only_ts}]").prop('selected', true);</script>



{/if}


<input type="hidden" name="form_submit" id=form_submit>

{literal}
<script>
function fn_submit(val)
{
	$('#form_submit').val(val);
	$('#form_report').submit();
}
</script>
{/literal}



<table border=0>
	<tr style="vertical-align: top;">
		<td>
			<input type=radio id="is_act" name="is_act" value=1>все ТП<br>
			<input type=radio id="is_act" name="is_act" value=2>соответствуют условиям акции<br>
			<input type=radio id="is_act" name="is_act" value=3>не соответствуют условиям акции<br>
			<script>$("input[name=is_act][value={$smarty.request.is_act|default:1}]").attr('checked',true);</script>
		</td>
<!--
		<td>
			<input type=radio id="ok_traid" name="ok_traid" value=1>все ТП<br>
			<input type=radio id="ok_traid" name="ok_traid" value=2>запрет ВСТМ<br>
			<script>$("input[name=ok_traid][value={$smarty.request.ok_traid|default:1}]").attr('checked',true);</script>
		</td>
-->
		<td>
			<input type=radio id="ok_ts" name="ok_ts" value=1>все ТП<br>
			<input type=radio id="ok_ts" name="ok_ts" value=2>бонус выдан<br>
			<input type=radio id="ok_ts" name="ok_ts" value=3>бонус не выдан<br>
			<script>$("input[name=ok_ts][value={$smarty.request.ok_ts|default:1}]").attr('checked',true);</script>
		</td>
		<td>
			<input type=radio id="ok_chief" name="ok_chief" value=1>все ТП<br>
			<input type=radio id="ok_chief" name="ok_chief" value=2>подтверждено руководителем<br>
			<input type=radio id="ok_chief" name="ok_chief" value=3>не подтверждено руководителем<br>
			<script>$("input[name=ok_chief][value={$smarty.request.ok_chief|default:1}]").attr('checked',true);</script>
		</td>
	</tr>
</table>

<input type=submit name=generate id=generate value="Выбрать">


{/if}


{if $smarty.request.generate}


<input type=hidden name=generate value=1>





{if not $smarty.request.print}
<p><a href="?action=a13_vo_process&month={$smarty.request.month}&generate=1&print=1&excel=1&filename=Ход акции Волшебная осень с АВК - {if $smarty.request.month neq 13}{$m_cur}{else}накопительная{/if}">Экспорт в Excel</a></p>
{/if}

{include file="a13_vo_process_1.html"}
{include file="a13_vo_process_2.html"}
{include file="a13_vo_process_3.html"}

{/if}

{if not $smarty.request.print}

</form>

{literal}
<script type="text/javascript">

function check_item($ok,$k1,$e,$sck,$t1,$t2)
{
	var hd = document.forms["form_report"].elements[""+$ok+"["+$e+"]["+$k1+"]"];
	if ($t1)
	{
		var t1 = document.forms["form_report"].elements[$t1+"["+$k1+"]"];
	}
	if ($t2)
	{
		var t2 = document.forms["form_report"].elements[$t2+"["+$k1+"]"];
	}
	if ($sck)
	{
		hd.value=1;
		if ($t1)
		{
			t1.disabled=false;
		}
		if ($t2)
		{
			t2.disabled=false;
		}
		//if (tn) tn.value={/literal}{$tn}{literal};
	}
	else
	{
		hd.value=0;
		if ($t1)
		{
			t1.value="";
			t1.disabled=true;
		}
		if ($t2)
		{
			t2.value="";
			t2.disabled=true;
		}
	}
}
</script>
{/literal}

{/if}